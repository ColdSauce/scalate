<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="scala template engine implementing HAML, JSP, Erb style templates">
    <meta name="keywords" content="scalate,scala,template engine,haml,erb,jsp">
    <meta name="author" content="Scalate">

    <link href="../styles/impact/css/pygmentize.css" rel="stylesheet" type="text/css">
    <link href="../styles/impact/css/site.css" rel="stylesheet" type="text/css">
    
    <title>Mustache Reference</title>



</head>
<body>
  
  <div id="navigation">
  	<div class="wrapper">
      <ul><li class="webgen-menu-level1"><a href="../index.html">Scalate 1.3-SNAPSHOT</a></li><li class="webgen-menu-level1"><a href="../download.html">Download</a></li><li class="webgen-menu-level1"><a href="../source.html">Source</a></li><li class="webgen-menu-level1"><a href="../community.html">Community</a></li><li class="webgen-menu-level1"><a href="../support.html">Support</a></li><li class="webgen-menu-level1 webgen-menu-submenu webgen-menu-submenu-inhierarchy"><a href="index.html">Documentation</a></li></ul>
  	</div>
  </div>
  

  <div id="overview">
    <div class="wrapper">
      
      <div class="logo">
        <img alt="scalate logo" src="../images/project-logo.png">
      </div>
      
      <div class="message">
        <h1 id='mustache_reference_guide'>Mustache Reference Guide</h1>
      </div>
    </div>
  </div>





  <div id='content'>
  	<div class='wrapper'>
      <h1 id='mustache'>Mustache</h1>
<div class='maruku_toc'><ul style='list-style: none;'><li><a href='#introduction'>Introduction</a></li><li><a href='#syntax'>Syntax</a><ul style='list-style: none;'><li><a href='#variables'>Variables</a></li><li><a href='#sections'>Sections</a><ul style='list-style: none;'><li><a href='#empty_lists_false_or_none'>Empty Lists, false or None</a></li><li><a href='#non_empty_lists'>Non Empty Lists</a></li><li><a href='#functions'>Functions</a></li><li><a href='#non_false_values'>Non False Values</a></li></ul></li><li><a href='#inverted_sections'>Inverted Sections</a></li><li><a href='#comments'>Comments</a></li><li><a href='#partials'>Partials</a></li><li><a href='#set_delimiter'>Set Delimiter</a></li></ul></li><li><a href='#other_resources'>Other Resources</a></li></ul></div>
<h2 id='introduction'>Introduction</h2>

<p>Scalate&#8217;s Mustache is a Scala/Java implementation of the <a href='http://mustache.github.com/'>Mustache</a> template language.</p>

<p>Mustache provides logic-less templates which also work inside the browser using <a href='http://github.com/janl/mustache.js'>mustache.js</a> - so ideal for HTML templates which your designers own.</p>

<p>You can use a regular HTML file as the template and let your designer own it, using a little JavaScript file inject the template with sample data. Your Scala/Java developer can then use the template and inject the values on the server side using the real services and domain model.</p>

<p>A typical Mustache template:</p>
<div class='syntax'><div class='highlight'><pre>Hello {{name}}&#x000A;You have just won ${{value}}!&#x000A;{{#in_ca}}&#x000A;Well, ${{taxed_value}}, after taxes.&#x000A;{{/in_ca}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span>&#x000A;  <span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;Chris&quot;</span><span class='o'>,</span>&#x000A;  <span class='s'>&quot;value&quot;</span> <span class='o'>-&gt;</span> <span class='mi'>10000</span><span class='o'>,</span>&#x000A;  <span class='s'>&quot;taxed_value&quot;</span> <span class='o'>-&gt;</span> <span class='mi'>10000</span> <span class='o'>-</span> <span class='o'>(</span><span class='mi'>10000</span> <span class='o'>*</span> <span class='mf'>0.4</span><span class='o'>),</span>&#x000A;  <span class='s'>&quot;in_ca&quot;</span> <span class='o'>-&gt;</span> <span class='kc'>true</span>&#x000A;  <span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>Hello Chris&#x000A;You have just won $10000!&#x000A;Well, $6000.0, after taxes.&#x000A;</pre></div>&#x000A;</div>
<h2 id='syntax'>Syntax</h2>

<p>Mustache works using tags which are surrounded by mustaches <strong>{{someTag}}</strong>. There are various kinds of tag</p>

<h3 id='variables'>Variables</h3>

<p>The most basic tag type is the variable. A <strong>{{name}}</strong> tag just tries to lookup <em>name</em> in the current context and if there is no name then nothing is rendered.</p>

<p>All values are HTML escaped by default. If you want to return unescaped HTML use the triple mustache <strong>{{{name}}}</strong>. Or you can use <strong>{{&amp; name}}</strong></p>

<p>You can customize how a null value or empty string is rendered by configuring properties on <a href='http://scalate.fusesource.org/maven/1.2/scalate-core/scaladocs/org/fusesource/scalate/RenderContext.html'>RenderContext</a> such as <strong>nullString</strong> or <strong>noneString</strong></p>

<h3 id='sections'>Sections</h3>

<p>Sections render blocks of text one or more times, depending on the value of the key in the current context.</p>

<p>A section begins with <strong>{{#foo}}</strong> and ends with <strong>{{/foo}}</strong>. The behavior of the section is defined by the value of the key.</p>

<h4 id='empty_lists_false_or_none'>Empty Lists, false or None</h4>

<p>If a key exists and is false, None or an empty collection then the section will not render anything.</p>

<p>Template:</p>
<div class='syntax'><div class='highlight'><pre>Shown.&#x000A;{{#nothin}}&#x000A;  Never shown!&#x000A;{{/nothin}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span><span class='s'>&quot;person&quot;</span> <span class='o'>-&gt;</span> <span class='kc'>true</span><span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>Shown.&#x000A;</pre></div>&#x000A;</div>
<h4 id='non_empty_lists'>Non Empty Lists</h4>

<p>If the value is a non-empty list the section will be displayed multiple times. In each case the context of the section will be set to the item in the list.</p>

<p>Template:</p>
<div class='syntax'><div class='highlight'><pre>{{#repo}}&#x000A;  &lt;b&gt;{{name}}&lt;/b&gt;&#x000A;{{/repo}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span>&#x000A;  <span class='s'>&quot;repo&quot;</span> <span class='o'>-&gt;</span> <span class='nc'>List</span><span class='o'>(</span>&#x000A;    <span class='nc'>Map</span><span class='o'>(</span><span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;resque&quot;</span><span class='o'>),</span>&#x000A;    <span class='nc'>Map</span><span class='o'>(</span><span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;hub&quot;</span><span class='o'>),</span>&#x000A;    <span class='nc'>Map</span><span class='o'>(</span><span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;rip&quot;</span><span class='o'>)</span>&#x000A;  <span class='o'>)</span>&#x000A;<span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>&lt;b&gt;resque&lt;/b&gt;&#x000A;&lt;b&gt;hub&lt;/b&gt;&#x000A;&lt;b&gt;rip&lt;/b&gt;&#x000A;</pre></div>&#x000A;</div>
<h4 id='functions'>Functions</h4>

<p>When the value is a function which takes a String parameter then it will be invoked with the text of the section.</p>
<div class='syntax'><div class='highlight'><pre>{{#wrapped}}&#x000A;  {{name}} is awesome.&#x000A;{{/wrapped}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span>&#x000A;  <span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;Willy&quot;</span>&#x000A;  <span class='s'>&quot;wrapped&quot;</span> <span class='o'>-&gt;</span> <span class='o'>((</span><span class='n'>text</span><span class='k'>:</span> <span class='kt'>String</span><span class='o'>)</span> <span class='k'>=&gt;</span> <span class='o'>&lt;</span><span class='n'>b</span><span class='o'>&gt;{</span><span class='n'>text</span><span class='o'>}&lt;/</span><span class='n'>b</span><span class='o'>&gt;)</span>&#x000A;<span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>&lt;b&gt;Willy is awesome.&lt;/b&gt;&#x000A;</pre></div>&#x000A;</div>
<h4 id='non_false_values'>Non False Values</h4>

<p>When the value is not false, None or a collection it will be used as the context for a single rendering of the block</p>
<div class='syntax'><div class='highlight'><pre>{{#person?}}&#x000A;  Hi {{name}}!&#x000A;{{/person?}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span>&#x000A;  <span class='s'>&quot;person?&quot;</span> <span class='o'>-&gt;</span> <span class='nc'>Map</span><span class='o'>(</span><span class='s'>&quot;name&quot;</span> <span class='o'>-&gt;</span> <span class='s'>&quot;Jon&quot;</span><span class='o'>)</span>&#x000A;<span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>Hi Jon!&#x000A;</pre></div>&#x000A;</div>
<h3 id='inverted_sections'>Inverted Sections</h3>

<p>An inverted section begins with a caret (hat) and ends with a slash. That is <strong>{{^person}}</strong> begins a &#8220;person&#8221; inverted section while <strong>{{/person}}</strong> ends it.</p>

<p>While sections can be used to render text one or more times based on the value of the key, inverted sections may render text once based on the inverse value of the key. That is, they will be rendered if the key doesn&#8217;t exist, is false, or is an empty list.</p>
<div class='syntax'><div class='highlight'><pre>{{#repo}}&#x000A;  &lt;b&gt;{{name}}&lt;/b&gt;&#x000A;{{/repo}}&#x000A;{{^repo}}&#x000A;  No repos :(&#x000A;{{/repo}}&#x000A;</pre></div>&#x000A;</div>
<p>Given the following attributes:</p>
<div class='syntax'><div class='highlight'><pre><span class='nc'>Map</span><span class='o'>(</span>&#x000A;  <span class='s'>&quot;repo&quot;</span> <span class='o'>-&gt;</span> &#x000A;<span class='o'>)</span>&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>No repos :(&#x000A;</pre></div>&#x000A;</div>
<h3 id='comments'>Comments</h3>

<p>Comments begin with a bang and are ignored. The following template:</p>
<div class='syntax'><div class='highlight'><pre>&lt;h1&gt;Today{{! ignore me }}.&lt;/h1&gt;&#x000A;</pre></div>&#x000A;</div>
<p>Will produce the following:</p>
<div class='syntax'><div class='highlight'><pre>&lt;h1&gt;Today.&lt;/h1&gt;&#x000A;</pre></div>&#x000A;</div>
<p>Comments may contain newlines.</p>

<h3 id='partials'>Partials</h3>

<p>Partials begin with a greater than sign, like <strong>{{&gt; box}}</strong>.</p>

<p>Partials are rendered at runtime (as opposed to compile time), so recursive partials are possible. Just avoid infinite loops.</p>

<p>They also inherit the calling context so you don&#8217;t have to pass in state.</p>

<p>In this way you may want to think of partials as includes, or template expansion, even though it&#8217;s not literally true.</p>

<p>For example, this template and partial:</p>

<p>base.mustache:</p>
<div class='syntax'><div class='highlight'><pre>&lt;h2&gt;Names&lt;/h2&gt;&#x000A;{{#names}}&#x000A;  {{&gt; user}}&#x000A;{{/names}}&#x000A;</pre></div>&#x000A;</div>
<p>user.mustache:</p>
<div class='syntax'><div class='highlight'><pre>&lt;strong&gt;{{name}}&lt;/strong&gt;&#x000A;</pre></div>&#x000A;</div>
<p>Can be thought of as a single, expanded template:</p>
<div class='syntax'><div class='highlight'><pre>&lt;h2&gt;Names&lt;/h2&gt;&#x000A;{{#names}}&#x000A;  &lt;strong&gt;{{name}}&lt;/strong&gt;&#x000A;{{/names}}&#x000A;</pre></div>&#x000A;</div>
<h3 id='set_delimiter'>Set Delimiter</h3>

<p>Set Delimiter tags start with an equal sign and change the tag delimiters from {{ and }} to custom strings.</p>

<p>Consider the following contrived example:</p>
<div class='syntax'><div class='highlight'><pre>* {{default_tags}}&#x000A;{{=&lt;% %&gt;=}}&#x000A;* &lt;% erb_style_tags %&gt;&#x000A;&lt;%={{ }}=%&gt;&#x000A;* {{ default_tags_again }}&#x000A;</pre></div>&#x000A;</div>
<p>Here we have a list with three items. The first item uses the default tag style, the second uses erb style as defined by the Set Delimiter tag, and the third returns to the default style after yet another Set Delimiter declaration.</p>

<p>According to ctemplates, this &#8220;is useful for languages like TeX, where double-braces may occur in the text and are awkward to use for markup.&#8221;</p>

<p>Custom delimiters may not contain whitespace or the equals sign.</p>

<h2 id='other_resources'>Other Resources</h2>

<ul>
<li><a href='http://mustache.github.com/mustache.5.html'>Mustache reference</a></li>

<li><a href='http://mustache.github.com/'>Other Mustache implementations</a></li>
</ul>
  	</div>
  </div>





<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1347593-12");
pageTracker._trackPageview();
} catch(err) {}
</script>
</body>
</html>